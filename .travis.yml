language: go

os:
  - linux

go:
  - '1.11'

env:
  global:
    - secure: "Wr5IBql2Pn7sH0Bi/MzvNM1s98/te+1sfwQH0JMgL+CTKNBt/5nDw9g7JARSqQCO3AvLjYBwBpkD0sSjo7dXf6To3DuYNpWhJDDEqraZezreI+iu1hEWwMeIPVV9y9FAHxaBKvtXOp7jPA/3gvhjIcBHZJpWrQn7QiMMI94f1ondqqdaEi0s4j2lBf0M1UzFxY5PBY4rouhSW2AVgJmL+MU7HdgGHhIPl7lua2RgE8CKVo1z+JtyA5aObvV1befqpNAQiRB3wm5VV4BAV/zgC7v3SU5o3Ig1mj8uIhFxuFk4k1GZCtbwaxpYLYzlOOg0v5hgvcvyQuERupY9y6Q8z8v+Adk3Mw9oJe8zrYR38s8eucfe11/hi0hJmevKNL9YnYu7vZBqCFFloOukVceIxh8ElIBM6OlAmpCNB6/NDXumyBHXhBoPgRwkuxcS7tLZXSR9+17M6buIsWvrJsjPG7xUgCZlwp5De1LEGdLlqmimLZybVkdLnvaJseKDyrV093tvQtSq/fEaUKdsQpo0uCxFq3kPzT3Q0rfaoqQHGaZzAeFb2a3jS8rptzcChaHsnUu61f44SfphfFMiio0DSNGmfNSWAbHdjsZsoLlSi+55QHgDMCpc65WuLq/Tr+tfkDrZHHz9+uoPK+1Y/J4Tla3OK8d3sXaPK3zN3qa0jJw="
    - GITHUB_REPO: "$GIT_USER/$GIT_REPO"

before_install:
  # git config
  - git config --global user.email "$GIT_EMAIL"
  - git config --global user.name "$GIT_NAME"
  - git config --global push.default simple
  # go dependencies
  - GO111MODULE=on go get github.com/gohugoio/hugo

before_script:
  # git
  - git clone "https://github.com/$GITHUB_REPO.git" --branch gh-pages public

script: hugo

after_success:
  - cd public
  - git add --all
  - git commit -m "Publishing to gh-pages from Travis `date`"
  - cd ..
  - git push --force --quiet "https://$GIT_USER:$GITHUB_TOKEN@github.com/$GITHUB_REPO.git" origin gh-pages

branches:
  only:
    - hugo
    - travis
