language: go

os:
  - linux

go:
  - '1.11'

env:
  global:
    secure: obmNhGlCvIsRavKjbp/8NsYkxDI1kCVBV8d8y2ISKG44ouXNM8yvJAshHlMdUuYhNxihe7eTapVVDPAhLJ9/0eIprHaBjo9Csmfto3H0VT5JQ6/5LJFw8bjA5douJrsk7K3hD23RI2YnLOMNMO10Ef5mMHkrY3iHSFIu6h1SisYP9CR+UV8syQLr/JsY4gRFGPdG5x+fLZXxIj8P9PuNRAfhAevTz3oiaMFxmHYKyaCyEmV+K2Kh0ZXoCWwqUWL4j1r9mm/ADegqYYkVyLMunUHCp7X+OP1FgAKUvBKAvL0SPmjtj75/AM9jqYcqBWDPbaSw4ENZLw+F63dnKc3Brai/XWkLg9ihSSLL2pCUKE5PvqevixIIBUooo4nCFPVJ3+vQouzQ4BMcEqy37AFCqSoD6YwFZp2AJ6UjSh4Y1nG5KZg9gyU4n49H9Lope8o9fKPFLR9wLiUleSh+Ai4u4XJQdq5DAA+Mv+kFYRXTyM4cAJypHiw6CYN7qdbbjM8uinpkEMM30u+m7wTtmybNfqOAHKu7TvhVXE8jvVgU6cBRGzZDkkMbtd6jj8+aXbPC0gxs9gu95/WZueC0d5z8ki4EtalST93f4rdqaAvrGoLHkcVQhhzZTo9V7t6MC0flHeBSB3ar8PtWprhitJM11OIJEbyouXZzfSd6DXh8AnE=
    GITHUB_REPO: "$GIT_USER/$GIT_REPO"

before_install:
  # git config
  - git config --global user.email "$GIT_EMAIL"
  - git config --global user.name "$GIT_NAME"
  - git config --global push.default simple
  # go dependencies
  - GO111MODULE=on go get github.com/gohugoio/hugo

before_script:
  # git
  - echo $GITHUB_REPO
  - echo $GIT_NAME
  - echo $GIT_USER
  - echo $GIT_REPO
  - git clone "https://github.com/$GITHUB_REPO.git" --branch gh-pages public

script: hugo

after_success:
  - cd public
  - git add --all
  - git commit -m "Publishing to gh-pages from Travis `date`"
  - cd ..
  - git push --force --quiet "https://$GITHUB_TOKEN@github.com/$GITHUB_REPO.git" origin gh-pages

branches:
  only:
    - hugo
    - travis
